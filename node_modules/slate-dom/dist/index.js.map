{"version":3,"file":"index.js","sources":["../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toConsumableArray.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/slicedToArray.js","../src/utils/dom.ts","../src/utils/environment.ts","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/typeof.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPrimitive.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/createClass.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/classCallCheck.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/defineProperty.js","../src/utils/key.ts","../src/utils/weak-maps.ts","../src/plugin/dom-editor.ts","../src/utils/diff-text.ts","../src/utils/lines.ts","../src/plugin/with-dom.ts","../src/utils/constants.ts","../src/utils/hotkeys.ts","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../../../../../../.yarn/berry/cache/@babel-runtime-npm-7.23.2-d013d6cf7e-10.zip/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../src/utils/range-list.ts"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * Types.\n */\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\nimport { DOMEditor } from '../plugin/dom-editor'\n\nexport {\n  DOMNode,\n  DOMComment,\n  DOMElement,\n  DOMText,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n}\n\ndeclare global {\n  interface Window {\n    Selection: (typeof Selection)['constructor']\n    DataTransfer: (typeof DataTransfer)['constructor']\n    Node: (typeof Node)['constructor']\n  }\n}\n\nexport type DOMPoint = [Node, number]\n\n/**\n * Returns the host window of a DOM node\n */\n\nexport const getDefaultView = (value: any): Window | null => {\n  return (\n    (value && value.ownerDocument && value.ownerDocument.defaultView) || null\n  )\n}\n\n/**\n * Check if a DOM node is a comment node.\n */\n\nexport const isDOMComment = (value: any): value is DOMComment => {\n  return isDOMNode(value) && value.nodeType === 8\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMElement = (value: any): value is DOMElement => {\n  return isDOMNode(value) && value.nodeType === 1\n}\n\n/**\n * Check if a value is a DOM node.\n */\n\nexport const isDOMNode = (value: any): value is DOMNode => {\n  const window = getDefaultView(value)\n  return !!window && value instanceof window.Node\n}\n\n/**\n * Check if a value is a DOM selection.\n */\n\nexport const isDOMSelection = (value: any): value is DOMSelection => {\n  const window = value && value.anchorNode && getDefaultView(value.anchorNode)\n  return !!window && value instanceof window.Selection\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMText = (value: any): value is DOMText => {\n  return isDOMNode(value) && value.nodeType === 3\n}\n\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\n\nexport const isPlainTextOnlyPaste = (event: ClipboardEvent) => {\n  return (\n    event.clipboardData &&\n    event.clipboardData.getData('text/plain') !== '' &&\n    event.clipboardData.types.length === 1\n  )\n}\n\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\n\nexport const normalizeDOMPoint = (domPoint: DOMPoint): DOMPoint => {\n  let [node, offset] = domPoint\n\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    let isLast = offset === node.childNodes.length\n    let index = isLast ? offset - 1 : offset\n    ;[node, index] = getEditableChildAndIndex(\n      node,\n      index,\n      isLast ? 'backward' : 'forward'\n    )\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset\n\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      const i = isLast ? node.childNodes.length - 1 : 0\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward')\n    }\n\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0\n  }\n\n  // Return the node and offset.\n  return [node, offset]\n}\n\n/**\n * Determines whether the active element is nested within a shadowRoot\n */\n\nexport const hasShadowRoot = (node: Node | null) => {\n  let parent = node && node.parentNode\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true\n    }\n    parent = parent.parentNode\n  }\n  return false\n}\n\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChildAndIndex = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): [DOMNode, number] => {\n  const { childNodes } = parent\n  let child = childNodes[index]\n  let i = index\n  let triedForward = false\n  let triedBackward = false\n\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (\n    isDOMComment(child) ||\n    (isDOMElement(child) && child.childNodes.length === 0) ||\n    (isDOMElement(child) && child.getAttribute('contenteditable') === 'false')\n  ) {\n    if (triedForward && triedBackward) {\n      break\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true\n      i = index - 1\n      direction = 'backward'\n      continue\n    }\n\n    if (i < 0) {\n      triedBackward = true\n      i = index + 1\n      direction = 'forward'\n      continue\n    }\n\n    child = childNodes[i]\n    index = i\n    i += direction === 'forward' ? 1 : -1\n  }\n\n  return [child, index]\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChild = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): DOMNode => {\n  const [child] = getEditableChildAndIndex(parent, index, direction)\n  return child\n}\n\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\n\nexport const getPlainText = (domNode: DOMNode) => {\n  let text = ''\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue\n  }\n\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode)\n    }\n\n    const display = getComputedStyle(domNode).getPropertyValue('display')\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n'\n    }\n  }\n\n  return text\n}\n\n/**\n * Get x-slate-fragment attribute from data-slate-fragment\n */\nconst catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m\nexport const getSlateFragmentAttribute = (\n  dataTransfer: DataTransfer\n): string | void => {\n  const htmlData = dataTransfer.getData('text/html')\n  const [, fragment] = htmlData.match(catchSlateFragment) || []\n  return fragment\n}\n\n/**\n * Get the x-slate-fragment attribute that exist in text/html data\n * and append it to the DataTransfer object\n */\nexport const getClipboardData = (\n  dataTransfer: DataTransfer,\n  clipboardFormatKey = 'x-slate-fragment'\n): DataTransfer => {\n  if (!dataTransfer.getData(`application/${clipboardFormatKey}`)) {\n    const fragment = getSlateFragmentAttribute(dataTransfer)\n    if (fragment) {\n      const clipboardData = new DataTransfer()\n      dataTransfer.types.forEach(type => {\n        clipboardData.setData(type, dataTransfer.getData(type))\n      })\n      clipboardData.setData(`application/${clipboardFormatKey}`, fragment)\n      return clipboardData\n    }\n  }\n  return dataTransfer\n}\n\n/**\n * Get the dom selection from Shadow Root if possible, otherwise from the document\n */\nexport const getSelection = (root: Document | ShadowRoot): Selection | null => {\n  if (root.getSelection != null) {\n    return root.getSelection()\n  }\n  return document.getSelection()\n}\n\n/**\n * Check whether a mutation originates from a editable element inside the editor.\n */\n\nexport const isTrackedMutation = (\n  editor: DOMEditor,\n  mutation: MutationRecord,\n  batch: MutationRecord[]\n): boolean => {\n  const { target } = mutation\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false\n  }\n\n  const { document } = DOMEditor.getWindow(editor)\n  if (containsShadowAware(document, target)) {\n    return DOMEditor.hasDOMNode(editor, target, { editable: true })\n  }\n\n  const parentMutation = batch.find(({ addedNodes, removedNodes }) => {\n    for (const node of addedNodes) {\n      if (node === target || containsShadowAware(node, target)) {\n        return true\n      }\n    }\n\n    for (const node of removedNodes) {\n      if (node === target || containsShadowAware(node, target)) {\n        return true\n      }\n    }\n  })\n\n  if (!parentMutation || parentMutation === mutation) {\n    return false\n  }\n\n  // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n  return isTrackedMutation(editor, parentMutation, batch)\n}\n\n/**\n * Retrieves the deepest active element in the DOM, considering nested shadow DOMs.\n */\nexport const getActiveElement = () => {\n  let activeElement = document.activeElement\n\n  while (activeElement?.shadowRoot && activeElement.shadowRoot?.activeElement) {\n    activeElement = activeElement?.shadowRoot?.activeElement\n  }\n\n  return activeElement\n}\n\n/**\n * @returns `true` if `otherNode` is before `node` in the document; otherwise, `false`.\n */\nexport const isBefore = (node: DOMNode, otherNode: DOMNode): boolean =>\n  Boolean(\n    node.compareDocumentPosition(otherNode) &\n      DOMNode.DOCUMENT_POSITION_PRECEDING\n  )\n\n/**\n * @returns `true` if `otherNode` is after `node` in the document; otherwise, `false`.\n */\nexport const isAfter = (node: DOMNode, otherNode: DOMNode): boolean =>\n  Boolean(\n    node.compareDocumentPosition(otherNode) &\n      DOMNode.DOCUMENT_POSITION_FOLLOWING\n  )\n\n/**\n * Shadow DOM-aware version of Element.closest()\n * Traverses up the DOM tree, crossing shadow DOM boundaries\n */\nexport const closestShadowAware = (\n  element: DOMElement | null | undefined,\n  selector: string\n): DOMElement | null => {\n  if (!element) {\n    return null\n  }\n\n  let current: DOMElement | null = element\n\n  while (current) {\n    if (current.matches && current.matches(selector)) {\n      return current\n    }\n\n    if (current.parentElement) {\n      current = current.parentElement\n    } else if (current.parentNode && 'host' in current.parentNode) {\n      current = (current.parentNode as ShadowRoot).host as DOMElement\n    } else {\n      return null\n    }\n  }\n\n  return null\n}\n\n/**\n * Shadow DOM-aware version of Node.contains()\n * Checks if a node contains another node, crossing shadow DOM boundaries\n */\nexport const containsShadowAware = (\n  parent: DOMNode | null | undefined,\n  child: DOMNode | null | undefined\n): boolean => {\n  if (!parent || !child) {\n    return false\n  }\n\n  if (parent.contains(child)) {\n    return true\n  }\n\n  let current: DOMNode | null = child\n\n  while (current) {\n    if (current === parent) {\n      return true\n    }\n\n    if (current.parentNode) {\n      if ('host' in current.parentNode) {\n        current = (current.parentNode as ShadowRoot).host\n      } else {\n        current = current.parentNode\n      }\n    } else {\n      return false\n    }\n  }\n\n  return false\n}\n","export const IS_IOS =\n  typeof navigator !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n  !window.MSStream\n\nexport const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent)\n\nexport const IS_ANDROID =\n  typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent)\n\nexport const IS_FIREFOX =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const IS_WEBKIT =\n  typeof navigator !== 'undefined' &&\n  /AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent)\n\n// \"modern\" Edge was released at 79.x\nexport const IS_EDGE_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent)\n\nexport const IS_CHROME =\n  typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent)\n\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nexport const IS_CHROME_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent)\n\nexport const IS_ANDROID_CHROME_LEGACY =\n  IS_ANDROID &&\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-5]?\\d)(?:\\.)/i.test(navigator.userAgent)\n\n// Firefox did not support `beforeInput` until `v87`.\nexport const IS_FIREFOX_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(\n    navigator.userAgent\n  )\n\n// UC mobile browser\nexport const IS_UC_MOBILE =\n  typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent)\n\n// Wechat browser (not including mac wechat)\nexport const IS_WECHATBROWSER =\n  typeof navigator !== 'undefined' &&\n  /.*Wechat/.test(navigator.userAgent) &&\n  !/.*MacWechat/.test(navigator.userAgent) && // avoid lookbehind (buggy in safari < 16.4)\n  (!IS_CHROME || IS_CHROME_LEGACY) // wechat and low chrome is real wechat\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const CAN_USE_DOM = !!(\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n)\n\n// Check if the browser is Safari and older than 17\nexport const IS_SAFARI_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Safari/.test(navigator.userAgent) &&\n  /Version\\/(\\d+)/.test(navigator.userAgent) &&\n  (navigator.userAgent.match(/Version\\/(\\d+)/)?.[1]\n    ? parseInt(navigator.userAgent.match(/Version\\/(\\d+)/)?.[1]!, 10) < 17\n    : false)\n\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nexport const HAS_BEFORE_INPUT_SUPPORT =\n  (!IS_CHROME_LEGACY || !IS_ANDROID_CHROME_LEGACY) &&\n  !IS_EDGE_LEGACY &&\n  // globalThis is undefined in older browsers\n  typeof globalThis !== 'undefined' &&\n  globalThis.InputEvent &&\n  // @ts-ignore The `getTargetRanges` property isn't recognized.\n  typeof globalThis.InputEvent.prototype.getTargetRanges === 'function'\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * An auto-incrementing identifier for keys.\n */\n\nlet n = 0\n\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\n\nexport class Key {\n  id: string\n\n  constructor() {\n    this.id = `${n++}`\n  }\n}\n","import {\n  Ancestor,\n  Editor,\n  Node,\n  Operation,\n  Point,\n  Range,\n  RangeRef,\n  Text,\n} from 'slate'\nimport { TextDiff } from './diff-text'\nimport { Key } from './key'\n\nexport type Action = { at?: Point | Range; run: () => void }\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\nexport const IS_NODE_MAP_DIRTY: WeakMap<Editor, boolean> = new WeakMap()\nexport const NODE_TO_INDEX: WeakMap<Node, number> = new WeakMap()\nexport const NODE_TO_PARENT: WeakMap<Node, Ancestor> = new WeakMap()\n\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nexport const EDITOR_TO_WINDOW: WeakMap<Editor, Window> = new WeakMap()\nexport const EDITOR_TO_ELEMENT: WeakMap<Editor, HTMLElement> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER: WeakMap<Editor, string> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER_ELEMENT: WeakMap<Editor, HTMLElement> =\n  new WeakMap()\nexport const ELEMENT_TO_NODE: WeakMap<HTMLElement, Node> = new WeakMap()\nexport const NODE_TO_ELEMENT: WeakMap<Node, HTMLElement> = new WeakMap()\nexport const NODE_TO_KEY: WeakMap<Node, Key> = new WeakMap()\nexport const EDITOR_TO_KEY_TO_ELEMENT: WeakMap<\n  Editor,\n  WeakMap<Key, HTMLElement>\n> = new WeakMap()\n\n/**\n * Weak maps for storing editor-related state.\n */\n\nexport const IS_READ_ONLY: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_FOCUSED: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_COMPOSING: WeakMap<Editor, boolean> = new WeakMap()\n\nexport const EDITOR_TO_USER_SELECTION: WeakMap<Editor, RangeRef | null> =\n  new WeakMap()\n\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\n\nexport const EDITOR_TO_ON_CHANGE = new WeakMap<\n  Editor,\n  (options?: { operation?: Operation }) => void\n>()\n\n/**\n * Weak maps for saving pending state on composition stage.\n */\n\nexport const EDITOR_TO_SCHEDULE_FLUSH: WeakMap<Editor, () => void> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_INSERTION_MARKS: WeakMap<\n  Editor,\n  Partial<Text> | null\n> = new WeakMap()\n\nexport const EDITOR_TO_USER_MARKS: WeakMap<Editor, Partial<Text> | null> =\n  new WeakMap()\n\n/**\n * Android input handling specific weak-maps\n */\n\nexport const EDITOR_TO_PENDING_DIFFS: WeakMap<Editor, TextDiff[]> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_ACTION: WeakMap<Editor, Action | null> =\n  new WeakMap()\n\nexport const EDITOR_TO_PENDING_SELECTION: WeakMap<Editor, Range | null> =\n  new WeakMap()\n\nexport const EDITOR_TO_FORCE_RENDER: WeakMap<Editor, () => void> = new WeakMap()\n\n/**\n * Symbols.\n */\n\nexport const PLACEHOLDER_SYMBOL = Symbol('placeholder') as unknown as string\nexport const MARK_PLACEHOLDER_SYMBOL = Symbol(\n  'mark-placeholder'\n) as unknown as string\n","import {\n  BaseEditor,\n  Editor,\n  Node,\n  Path,\n  Point,\n  Range,\n  Scrubber,\n  Transforms,\n} from 'slate'\nimport { TextDiff } from '../utils/diff-text'\nimport {\n  closestShadowAware,\n  containsShadowAware,\n  DOMElement,\n  DOMNode,\n  DOMPoint,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n  DOMText,\n  getSelection,\n  hasShadowRoot,\n  isAfter,\n  isBefore,\n  isDOMElement,\n  isDOMNode,\n  isDOMSelection,\n  normalizeDOMPoint,\n} from '../utils/dom'\nimport { IS_ANDROID, IS_CHROME, IS_FIREFOX } from '../utils/environment'\n\nimport { Key } from '../utils/key'\nimport {\n  EDITOR_TO_ELEMENT,\n  EDITOR_TO_KEY_TO_ELEMENT,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_WINDOW,\n  ELEMENT_TO_NODE,\n  IS_COMPOSING,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  NODE_TO_INDEX,\n  NODE_TO_KEY,\n  NODE_TO_PARENT,\n} from '../utils/weak-maps'\n\n/**\n * A DOM-specific version of the `Editor` interface.\n */\n\nexport interface DOMEditor extends BaseEditor {\n  hasEditableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n  hasRange: (editor: DOMEditor, range: Range) => boolean\n  hasSelectableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n  hasTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n  insertData: (data: DataTransfer) => void\n  insertFragmentData: (data: DataTransfer) => boolean\n  insertTextData: (data: DataTransfer) => boolean\n  isTargetInsideNonReadonlyVoid: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n  setFragmentData: (\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ) => void\n}\n\nexport interface DOMEditorInterface {\n  /**\n   * Experimental and android specific: Get pending diffs\n   */\n  androidPendingDiffs: (editor: Editor) => TextDiff[] | undefined\n\n  /**\n   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.\n   */\n  androidScheduleFlush: (editor: Editor) => void\n\n  /**\n   * Blur the editor.\n   */\n  blur: (editor: DOMEditor) => void\n\n  /**\n   * Deselect the editor.\n   */\n  deselect: (editor: DOMEditor) => void\n\n  /**\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\n   */\n  findDocumentOrShadowRoot: (editor: DOMEditor) => Document | ShadowRoot\n\n  /**\n   * Get the target range from a DOM `event`.\n   */\n  findEventRange: (editor: DOMEditor, event: any) => Range\n\n  /**\n   * Find a key for a Slate node.\n   */\n  findKey: (editor: DOMEditor, node: Node) => Key\n\n  /**\n   * Find the path of Slate node.\n   */\n  findPath: (editor: DOMEditor, node: Node) => Path\n\n  /**\n   * Focus the editor.\n   */\n  focus: (editor: DOMEditor, options?: { retries: number }) => void\n\n  /**\n   * Return the host window of the current editor.\n   */\n  getWindow: (editor: DOMEditor) => Window\n\n  /**\n   * Check if a DOM node is within the editor.\n   */\n  hasDOMNode: (\n    editor: DOMEditor,\n    target: DOMNode,\n    options?: { editable?: boolean }\n  ) => boolean\n\n  /**\n   * Check if the target is editable and in the editor.\n   */\n  hasEditableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n\n  /**\n   *\n   */\n  hasRange: (editor: DOMEditor, range: Range) => boolean\n\n  /**\n   * Check if the target can be selectable\n   */\n  hasSelectableTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n\n  /**\n   * Check if the target is in the editor.\n   */\n  hasTarget: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => target is DOMNode\n\n  /**\n   * Insert data from a `DataTransfer` into the editor.\n   */\n  insertData: (editor: DOMEditor, data: DataTransfer) => void\n\n  /**\n   * Insert fragment data from a `DataTransfer` into the editor.\n   */\n  insertFragmentData: (editor: DOMEditor, data: DataTransfer) => boolean\n\n  /**\n   * Insert text data from a `DataTransfer` into the editor.\n   */\n  insertTextData: (editor: DOMEditor, data: DataTransfer) => boolean\n\n  /**\n   * Check if the user is currently composing inside the editor.\n   */\n  isComposing: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the editor is focused.\n   */\n  isFocused: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the editor is in read-only mode.\n   */\n  isReadOnly: (editor: DOMEditor) => boolean\n\n  /**\n   * Check if the target is inside void and in an non-readonly editor.\n   */\n  isTargetInsideNonReadonlyVoid: (\n    editor: DOMEditor,\n    target: EventTarget | null\n  ) => boolean\n\n  /**\n   * Sets data from the currently selected fragment on a `DataTransfer`.\n   */\n  setFragmentData: (\n    editor: DOMEditor,\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ) => void\n\n  /**\n   * Find the native DOM element from a Slate node.\n   */\n  toDOMNode: (editor: DOMEditor, node: Node) => HTMLElement\n\n  /**\n   * Find a native DOM selection point from a Slate point.\n   */\n  toDOMPoint: (editor: DOMEditor, point: Point) => DOMPoint\n\n  /**\n   * Find a native DOM range from a Slate `range`.\n   *\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\n   *\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\n   */\n  toDOMRange: (editor: DOMEditor, range: Range) => DOMRange\n\n  /**\n   * Find a Slate node from a native DOM `element`.\n   */\n  toSlateNode: (editor: DOMEditor, domNode: DOMNode) => Node\n\n  /**\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\n   */\n  toSlatePoint: <T extends boolean>(\n    editor: DOMEditor,\n    domPoint: DOMPoint,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n      /**\n       * The direction to search for Slate leaf nodes if `domPoint` is\n       * non-editable and non-void.\n       */\n      searchDirection?: 'forward' | 'backward'\n    }\n  ) => T extends true ? Point | null : Point\n\n  /**\n   * Find a Slate range from a DOM range or selection.\n   */\n  toSlateRange: <T extends boolean>(\n    editor: DOMEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n    }\n  ) => T extends true ? Range | null : Range\n}\n\n// eslint-disable-next-line no-redeclare\nexport const DOMEditor: DOMEditorInterface = {\n  androidPendingDiffs: editor => EDITOR_TO_PENDING_DIFFS.get(editor),\n\n  androidScheduleFlush: editor => {\n    EDITOR_TO_SCHEDULE_FLUSH.get(editor)?.()\n  },\n\n  blur: editor => {\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, false)\n\n    if (root.activeElement === el) {\n      el.blur()\n    }\n  },\n\n  deselect: editor => {\n    const { selection } = editor\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = getSelection(root)\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges()\n    }\n\n    if (selection) {\n      Transforms.deselect(editor)\n    }\n  },\n\n  findDocumentOrShadowRoot: editor => {\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = el.getRootNode()\n\n    if (root instanceof Document || root instanceof ShadowRoot) {\n      return root\n    }\n\n    return el.ownerDocument\n  },\n\n  findEventRange: (editor, event) => {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent\n    }\n\n    const { clientX: x, clientY: y, target } = event\n\n    if (x == null || y == null) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    const node = DOMEditor.toSlateNode(editor, event.target)\n    const path = DOMEditor.findPath(editor, node)\n\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Node.isElement(node) && Editor.isVoid(editor, node)) {\n      const rect = target.getBoundingClientRect()\n      const isPrev = editor.isInline(node)\n        ? x - rect.left < rect.left + rect.width - x\n        : y - rect.top < rect.top + rect.height - y\n\n      const edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end',\n      })\n      const point = isPrev\n        ? Editor.before(editor, edge)\n        : Editor.after(editor, edge)\n\n      if (point) {\n        const range = Editor.range(editor, point)\n        return range\n      }\n    }\n\n    // Else resolve a range from the caret position where the drop occured.\n    let domRange\n    const { document } = DOMEditor.getWindow(editor)\n\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y)\n    } else {\n      const position = document.caretPositionFromPoint(x, y)\n\n      if (position) {\n        domRange = document.createRange()\n        domRange.setStart(position.offsetNode, position.offset)\n        domRange.setEnd(position.offsetNode, position.offset)\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    // Resolve a Slate range from the DOM range.\n    const range = DOMEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false,\n    })\n    return range\n  },\n\n  findKey: (editor, node) => {\n    let key = NODE_TO_KEY.get(node)\n\n    if (!key) {\n      key = new Key()\n      NODE_TO_KEY.set(node, key)\n    }\n\n    return key\n  },\n\n  findPath: (editor, node) => {\n    const path: Path = []\n    let child = node\n\n    while (true) {\n      const parent = NODE_TO_PARENT.get(child)\n\n      if (parent == null) {\n        if (child === editor) {\n          return path\n        } else {\n          break\n        }\n      }\n\n      const i = NODE_TO_INDEX.get(child)\n\n      if (i == null) {\n        break\n      }\n\n      path.unshift(i)\n      child = parent\n    }\n\n    throw new Error(\n      `Unable to find the path for Slate node: ${Scrubber.stringify(node)}`\n    )\n  },\n\n  focus: (editor, options = { retries: 5 }) => {\n    // Return if already focused\n    if (IS_FOCUSED.get(editor)) {\n      return\n    }\n\n    // Return if no dom node is associated with the editor, which means the editor is not yet mounted\n    // or has been unmounted. This can happen especially, while retrying to focus the editor.\n    if (!EDITOR_TO_ELEMENT.get(editor)) {\n      return\n    }\n\n    // Retry setting focus if the editor has pending operations.\n    // The DOM (selection) is unstable while changes are applied.\n    // Retry until retries are exhausted or editor is focused.\n    if (options.retries <= 0) {\n      throw new Error(\n        'Could not set focus, editor seems stuck with pending operations'\n      )\n    }\n    if (editor.operations.length > 0) {\n      setTimeout(() => {\n        DOMEditor.focus(editor, { retries: options.retries - 1 })\n      }, 10)\n      return\n    }\n\n    const el = DOMEditor.toDOMNode(editor, editor)\n    const root = DOMEditor.findDocumentOrShadowRoot(editor)\n    if (root.activeElement !== el) {\n      // Ensure that the DOM selection state is set to the editor's selection\n      if (editor.selection && root instanceof Document) {\n        const domSelection = getSelection(root)\n        const domRange = DOMEditor.toDOMRange(editor, editor.selection)\n        domSelection?.removeAllRanges()\n        domSelection?.addRange(domRange)\n      }\n      // Create a new selection in the top of the document if missing\n      if (!editor.selection) {\n        Transforms.select(editor, Editor.start(editor, []))\n      }\n      // IS_FOCUSED should be set before calling el.focus() to ensure that\n      // FocusedContext is updated to the correct value\n      IS_FOCUSED.set(editor, true)\n      el.focus({ preventScroll: true })\n    }\n  },\n\n  getWindow: editor => {\n    const window = EDITOR_TO_WINDOW.get(editor)\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor')\n    }\n    return window\n  },\n\n  hasDOMNode: (editor, target, options = {}) => {\n    const { editable = false } = options\n    const editorEl = DOMEditor.toDOMNode(editor, editor)\n    let targetEl\n\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = (\n        isDOMElement(target) ? target : target.parentElement\n      ) as HTMLElement\n    } catch (err) {\n      if (\n        err instanceof Error &&\n        !err.message.includes('Permission denied to access property \"nodeType\"')\n      ) {\n        throw err\n      }\n    }\n\n    if (!targetEl) {\n      return false\n    }\n\n    return (\n      closestShadowAware(targetEl, `[data-slate-editor]`) === editorEl &&\n      (!editable || targetEl.isContentEditable\n        ? true\n        : (typeof targetEl.isContentEditable === 'boolean' && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n            // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n            closestShadowAware(targetEl, '[contenteditable=\"false\"]') ===\n              editorEl) ||\n          !!targetEl.getAttribute('data-slate-zero-width'))\n    )\n  },\n\n  hasEditableTarget: (editor, target): target is DOMNode =>\n    isDOMNode(target) &&\n    DOMEditor.hasDOMNode(editor, target, { editable: true }),\n\n  hasRange: (editor, range) => {\n    const { anchor, focus } = range\n    return (\n      Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path)\n    )\n  },\n\n  hasSelectableTarget: (editor, target) =>\n    DOMEditor.hasEditableTarget(editor, target) ||\n    DOMEditor.isTargetInsideNonReadonlyVoid(editor, target),\n\n  hasTarget: (editor, target): target is DOMNode =>\n    isDOMNode(target) && DOMEditor.hasDOMNode(editor, target),\n\n  insertData: (editor, data) => {\n    editor.insertData(data)\n  },\n\n  insertFragmentData: (editor, data) => editor.insertFragmentData(data),\n\n  insertTextData: (editor, data) => editor.insertTextData(data),\n\n  isComposing: editor => {\n    return !!IS_COMPOSING.get(editor)\n  },\n\n  isFocused: editor => !!IS_FOCUSED.get(editor),\n\n  isReadOnly: editor => !!IS_READ_ONLY.get(editor),\n\n  isTargetInsideNonReadonlyVoid: (editor, target) => {\n    if (IS_READ_ONLY.get(editor)) return false\n    if (!DOMEditor.hasTarget(editor, target)) return false\n\n    const slateNode = DOMEditor.toSlateNode(editor, target)\n    return Node.isElement(slateNode) && Editor.isVoid(editor, slateNode)\n  },\n\n  setFragmentData: (editor, data, originEvent) =>\n    editor.setFragmentData(data, originEvent),\n\n  toDOMNode: (editor, node) => {\n    const domNode =\n      node === editor\n        ? EDITOR_TO_ELEMENT.get(editor)\n        : EDITOR_TO_KEY_TO_ELEMENT.get(editor)?.get(\n            DOMEditor.findKey(editor, node)\n          )\n\n    if (!domNode) {\n      throw new Error(\n        `Cannot resolve a DOM node from Slate node: ${Scrubber.stringify(node)}`\n      )\n    }\n\n    return domNode\n  },\n\n  toDOMPoint: (editor, point) => {\n    const [node] = Editor.node(editor, point.path)\n    const el = DOMEditor.toDOMNode(editor, node)\n    let domPoint: DOMPoint | undefined\n\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, { at: point })) {\n      point = { path: point.path, offset: 0 }\n    }\n\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    const selector = `[data-slate-string], [data-slate-zero-width]`\n    const texts = Array.from(el.querySelectorAll(selector))\n    let start = 0\n\n    for (let i = 0; i < texts.length; i++) {\n      const text = texts[i]\n      const domNode = text.childNodes[0] as HTMLElement\n\n      if (domNode == null || domNode.textContent == null) {\n        continue\n      }\n\n      const { length } = domNode.textContent\n      const attr = text.getAttribute('data-slate-length')\n      const trueLength = attr == null ? length : parseInt(attr, 10)\n      const end = start + trueLength\n\n      // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n      const nextText = texts[i + 1]\n      if (\n        point.offset === end &&\n        nextText?.hasAttribute('data-slate-mark-placeholder')\n      ) {\n        const domText = nextText.childNodes[0]\n\n        domPoint = [\n          // COMPAT: If we don't explicity set the dom point to be on the actual\n          // dom text element, chrome will put the selection behind the actual dom\n          // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n          // which will cause issues when scrolling to it.\n          domText instanceof DOMText ? domText : nextText,\n          nextText.textContent?.startsWith('\\uFEFF') ? 1 : 0,\n        ]\n        break\n      }\n\n      if (point.offset <= end) {\n        const offset = Math.min(length, Math.max(0, point.offset - start))\n        domPoint = [domNode, offset]\n        break\n      }\n\n      start = end\n    }\n\n    if (!domPoint) {\n      throw new Error(\n        `Cannot resolve a DOM point from Slate point: ${Scrubber.stringify(\n          point\n        )}`\n      )\n    }\n\n    return domPoint\n  },\n\n  toDOMRange: (editor, range) => {\n    const { anchor, focus } = range\n    const isBackward = Range.isBackward(range)\n    const domAnchor = DOMEditor.toDOMPoint(editor, anchor)\n    const domFocus = Range.isCollapsed(range)\n      ? domAnchor\n      : DOMEditor.toDOMPoint(editor, focus)\n\n    const window = DOMEditor.getWindow(editor)\n    const domRange = window.document.createRange()\n    const [startNode, startOffset] = isBackward ? domFocus : domAnchor\n    const [endNode, endOffset] = isBackward ? domAnchor : domFocus\n\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    const startEl = (\n      isDOMElement(startNode) ? startNode : startNode.parentElement\n    ) as HTMLElement\n    const isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width')\n    const endEl = (\n      isDOMElement(endNode) ? endNode : endNode.parentElement\n    ) as HTMLElement\n    const isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width')\n\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset)\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset)\n    return domRange\n  },\n\n  toSlateNode: (editor, domNode) => {\n    let domEl = isDOMElement(domNode) ? domNode : domNode.parentElement\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(`[data-slate-node]`)\n    }\n\n    const node = domEl ? ELEMENT_TO_NODE.get(domEl as HTMLElement) : null\n\n    if (!node) {\n      throw new Error(`Cannot resolve a Slate node from DOM node: ${domEl}`)\n    }\n\n    return node\n  },\n\n  toSlatePoint: <T extends boolean>(\n    editor: DOMEditor,\n    domPoint: DOMPoint,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n      searchDirection?: 'forward' | 'backward'\n    }\n  ): T extends true ? Point | null : Point => {\n    const { exactMatch, suppressThrow, searchDirection } = options\n    const [nearestNode, nearestOffset] = exactMatch\n      ? domPoint\n      : normalizeDOMPoint(domPoint)\n    const parentNode = nearestNode.parentNode as DOMElement\n    let textNode: DOMElement | null = null\n    let offset = 0\n\n    if (parentNode) {\n      const editorEl = DOMEditor.toDOMNode(editor, editor)\n      const potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]')\n      // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n      const voidNode =\n        potentialVoidNode && containsShadowAware(editorEl, potentialVoidNode)\n          ? potentialVoidNode\n          : null\n      const potentialNonEditableNode = parentNode.closest(\n        '[contenteditable=\"false\"]'\n      )\n      const nonEditableNode =\n        potentialNonEditableNode &&\n        containsShadowAware(editorEl, potentialNonEditableNode)\n          ? potentialNonEditableNode\n          : null\n      let leafNode = parentNode.closest('[data-slate-leaf]')\n      let domNode: DOMElement | null = null\n\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')\n\n        if (textNode) {\n          const window = DOMEditor.getWindow(editor)\n          const range = window.document.createRange()\n          range.setStart(textNode, 0)\n          range.setEnd(nearestNode, nearestOffset)\n\n          const contents = range.cloneContents()\n          const removals = [\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[data-slate-zero-width]')\n            ),\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[contenteditable=false]')\n            ),\n          ]\n\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (\n              IS_ANDROID &&\n              !exactMatch &&\n              el.hasAttribute('data-slate-zero-width') &&\n              el.textContent.length > 0 &&\n              el.textContext !== '\\uFEFF'\n            ) {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1)\n              }\n\n              return\n            }\n\n            el!.parentNode!.removeChild(el)\n          })\n\n          // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-dom\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n          offset = contents.textContent!.length\n          domNode = textNode\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        const leafNodes = voidNode.querySelectorAll('[data-slate-leaf]')\n        for (let index = 0; index < leafNodes.length; index++) {\n          const current = leafNodes[index]\n          if (DOMEditor.hasDOMNode(editor, current)) {\n            leafNode = current\n            break\n          }\n        }\n\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          offset = domNode.textContent!.length\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent!.length\n          })\n        }\n      } else if (nonEditableNode) {\n        // Find the edge of the nearest leaf in `searchDirection`\n        const getLeafNodes = (node: DOMElement | null | undefined) =>\n          node\n            ? node.querySelectorAll(\n                // Exclude leaf nodes in nested editors\n                '[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])'\n              )\n            : []\n        const elementNode = nonEditableNode.closest(\n          '[data-slate-node=\"element\"]'\n        )\n\n        if (searchDirection === 'backward' || !searchDirection) {\n          const leafNodes = [\n            ...getLeafNodes(elementNode?.previousElementSibling),\n            ...getLeafNodes(elementNode),\n          ]\n\n          leafNode =\n            leafNodes.findLast(leaf => isBefore(nonEditableNode, leaf)) ?? null\n\n          if (leafNode) {\n            searchDirection === 'backward'\n          }\n        }\n\n        if (searchDirection === 'forward' || !searchDirection) {\n          const leafNodes = [\n            ...getLeafNodes(elementNode),\n            ...getLeafNodes(elementNode?.nextElementSibling),\n          ]\n\n          leafNode =\n            leafNodes.find(leaf => isAfter(nonEditableNode, leaf)) ?? null\n\n          if (leafNode) {\n            searchDirection === 'forward'\n          }\n        }\n\n        if (leafNode) {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          if (searchDirection === 'forward') {\n            offset = 0\n          } else {\n            offset = domNode.textContent!.length\n            domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n              offset -= el.textContent!.length\n            })\n          }\n        }\n      }\n\n      if (\n        domNode &&\n        offset === domNode.textContent!.length &&\n        // COMPAT: Android IMEs might remove the zero width space while composing,\n        // and we don't add it for line-breaks.\n        IS_ANDROID &&\n        domNode.getAttribute('data-slate-zero-width') === 'z' &&\n        domNode.textContent?.startsWith('\\uFEFF') &&\n        // COMPAT: If the parent node is a Slate zero-width space, editor is\n        // because the text node should have no characters. However, during IME\n        // composition the ASCII characters will be prepended to the zero-width\n        // space, so subtract 1 from the offset to account for the zero-width\n        // space character.\n        (parentNode.hasAttribute('data-slate-zero-width') ||\n          // COMPAT: In Firefox, `range.cloneContents()` returns an extra trailing '\\n'\n          // when the document ends with a new-line character. This results in the offset\n          // length being off by one, so we need to subtract one to account for this.\n          (IS_FIREFOX && domNode.textContent?.endsWith('\\n\\n')))\n      ) {\n        offset--\n      }\n    }\n\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      const node = parentNode.hasAttribute('data-slate-node')\n        ? parentNode\n        : parentNode.closest('[data-slate-node]')\n\n      if (node && DOMEditor.hasDOMNode(editor, node, { editable: true })) {\n        const slateNode = DOMEditor.toSlateNode(editor, node)\n        let { path, offset } = Editor.start(\n          editor,\n          DOMEditor.findPath(editor, slateNode)\n        )\n\n        if (!node.querySelector('[data-slate-leaf]')) {\n          offset = nearestOffset\n        }\n\n        return { path, offset } as T extends true ? Point | null : Point\n      }\n    }\n\n    if (!textNode) {\n      if (suppressThrow) {\n        return null as T extends true ? Point | null : Point\n      }\n      throw new Error(\n        `Cannot resolve a Slate point from DOM point: ${domPoint}`\n      )\n    }\n\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    const slateNode = DOMEditor.toSlateNode(editor, textNode!)\n    const path = DOMEditor.findPath(editor, slateNode)\n    return { path, offset } as T extends true ? Point | null : Point\n  },\n\n  toSlateRange: <T extends boolean>(\n    editor: DOMEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: boolean\n      suppressThrow: T\n    }\n  ): T extends true ? Range | null : Range => {\n    const { exactMatch, suppressThrow } = options\n    const el = isDOMSelection(domRange)\n      ? domRange.anchorNode\n      : domRange.startContainer\n    let anchorNode\n    let anchorOffset\n    let focusNode\n    let focusOffset\n    let isCollapsed\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        // COMPAT: In firefox the normal seletion way does not work\n        // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n        if (IS_FIREFOX && domRange.rangeCount > 1) {\n          focusNode = domRange.focusNode // Focus node works fine\n          const firstRange = domRange.getRangeAt(0)\n          const lastRange = domRange.getRangeAt(domRange.rangeCount - 1)\n\n          // Here we are in the contenteditable mode of a table in firefox\n          if (\n            focusNode instanceof HTMLTableRowElement &&\n            firstRange.startContainer instanceof HTMLTableRowElement &&\n            lastRange.startContainer instanceof HTMLTableRowElement\n          ) {\n            // HTMLElement, becouse Element is a slate element\n            function getLastChildren(element: HTMLElement): HTMLElement {\n              if (element.childElementCount > 0) {\n                return getLastChildren(<HTMLElement>element.children[0])\n              } else {\n                return element\n              }\n            }\n\n            const firstNodeRow = <HTMLTableRowElement>firstRange.startContainer\n            const lastNodeRow = <HTMLTableRowElement>lastRange.startContainer\n\n            // This should never fail as \"The HTMLElement interface represents any HTML element.\"\n            const firstNode = getLastChildren(\n              <HTMLElement>firstNodeRow.children[firstRange.startOffset]\n            )\n            const lastNode = getLastChildren(\n              <HTMLElement>lastNodeRow.children[lastRange.startOffset]\n            )\n\n            // Zero, as we allways take the right one as the anchor point\n            focusOffset = 0\n\n            if (lastNode.childNodes.length > 0) {\n              anchorNode = lastNode.childNodes[0]\n            } else {\n              anchorNode = lastNode\n            }\n\n            if (firstNode.childNodes.length > 0) {\n              focusNode = firstNode.childNodes[0]\n            } else {\n              focusNode = firstNode\n            }\n\n            if (lastNode instanceof HTMLElement) {\n              anchorOffset = (<HTMLElement>lastNode).innerHTML.length\n            } else {\n              // Fallback option\n              anchorOffset = 0\n            }\n          } else {\n            // This is the read only mode of a firefox table\n            // Right to left\n            if (firstRange.startContainer === focusNode) {\n              anchorNode = lastRange.endContainer\n              anchorOffset = lastRange.endOffset\n              focusOffset = firstRange.startOffset\n            } else {\n              // Left to right\n              anchorNode = firstRange.startContainer\n              anchorOffset = firstRange.endOffset\n              focusOffset = lastRange.startOffset\n            }\n          }\n        } else {\n          anchorNode = domRange.anchorNode\n          anchorOffset = domRange.anchorOffset\n          focusNode = domRange.focusNode\n          focusOffset = domRange.focusOffset\n        }\n\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        // IsCollapsed might not work in firefox, but this will\n        if ((IS_CHROME && hasShadowRoot(anchorNode)) || IS_FIREFOX) {\n          isCollapsed =\n            domRange.anchorNode === domRange.focusNode &&\n            domRange.anchorOffset === domRange.focusOffset\n        } else {\n          isCollapsed = domRange.isCollapsed\n        }\n      } else {\n        anchorNode = domRange.startContainer\n        anchorOffset = domRange.startOffset\n        focusNode = domRange.endContainer\n        focusOffset = domRange.endOffset\n        isCollapsed = domRange.collapsed\n      }\n    }\n\n    if (\n      anchorNode == null ||\n      focusNode == null ||\n      anchorOffset == null ||\n      focusOffset == null\n    ) {\n      throw new Error(\n        `Cannot resolve a Slate range from DOM range: ${domRange}`\n      )\n    }\n\n    // COMPAT: Firefox sometimes includes an extra \\n (rendered by TextString\n    // when isTrailing is true) in the focusOffset, resulting in an invalid\n    // Slate point. (2023/11/01)\n    if (\n      IS_FIREFOX &&\n      focusNode.textContent?.endsWith('\\n\\n') &&\n      focusOffset === focusNode.textContent.length\n    ) {\n      focusOffset--\n    }\n\n    const anchor = DOMEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {\n      exactMatch,\n      suppressThrow,\n    })\n    if (!anchor) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    const focusBeforeAnchor =\n      isBefore(anchorNode, focusNode) ||\n      (anchorNode === focusNode && focusOffset < anchorOffset)\n    const focus = isCollapsed\n      ? anchor\n      : DOMEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n          exactMatch,\n          suppressThrow,\n          searchDirection: focusBeforeAnchor ? 'forward' : 'backward',\n        })\n    if (!focus) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    let range: Range = { anchor: anchor as Point, focus: focus as Point }\n    // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n    if (\n      Range.isExpanded(range) &&\n      Range.isForward(range) &&\n      isDOMElement(focusNode) &&\n      Editor.void(editor, { at: range.focus, mode: 'highest' })\n    ) {\n      range = Editor.unhangRange(editor, range, { voids: true })\n    }\n\n    return range as unknown as T extends true ? Range | null : Range\n  },\n}\n","import { Editor, Node, Operation, Path, Point, Range } from 'slate'\nimport { EDITOR_TO_PENDING_DIFFS } from './weak-maps'\n\nexport type StringDiff = {\n  start: number\n  end: number\n  text: string\n}\n\nexport type TextDiff = {\n  id: number\n  path: Path\n  diff: StringDiff\n}\n\n/**\n * Check whether a text diff was applied in a way we can perform the pending action on /\n * recover the pending selection.\n */\nexport function verifyDiffState(editor: Editor, textDiff: TextDiff): boolean {\n  const { path, diff } = textDiff\n  if (!Editor.hasPath(editor, path)) {\n    return false\n  }\n\n  const node = Node.get(editor, path)\n  if (!Node.isText(node)) {\n    return false\n  }\n\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return (\n      node.text.slice(diff.start, diff.start + diff.text.length) === diff.text\n    )\n  }\n\n  const nextPath = Path.next(path)\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false\n  }\n\n  const nextNode = Node.get(editor, nextPath)\n  return Node.isText(nextNode) && nextNode.text.startsWith(diff.text)\n}\n\nexport function applyStringDiff(text: string, ...diffs: StringDiff[]) {\n  return diffs.reduce(\n    (text, diff) =>\n      text.slice(0, diff.start) + diff.text + text.slice(diff.end),\n    text\n  )\n}\n\nfunction longestCommonPrefixLength(str: string, another: string) {\n  const length = Math.min(str.length, another.length)\n\n  for (let i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i\n    }\n  }\n\n  return length\n}\n\nfunction longestCommonSuffixLength(\n  str: string,\n  another: string,\n  max: number\n): number {\n  const length = Math.min(str.length, another.length, max)\n\n  for (let i = 0; i < length; i++) {\n    if (\n      str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)\n    ) {\n      return i\n    }\n  }\n\n  return length\n}\n\n/**\n * Remove redundant changes from the diff so that it spans the minimal possible range\n */\nexport function normalizeStringDiff(targetText: string, diff: StringDiff) {\n  const { start, end, text } = diff\n  const removedText = targetText.slice(start, end)\n\n  const prefixLength = longestCommonPrefixLength(removedText, text)\n  const max = Math.min(\n    removedText.length - prefixLength,\n    text.length - prefixLength\n  )\n  const suffixLength = longestCommonSuffixLength(removedText, text, max)\n\n  const normalized: StringDiff = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength),\n  }\n\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null\n  }\n\n  return normalized\n}\n\n/**\n * Return a string diff that is equivalent to applying b after a spanning the range of\n * both changes\n */\nexport function mergeStringDiffs(\n  targetText: string,\n  a: StringDiff,\n  b: StringDiff\n): StringDiff | null {\n  const start = Math.min(a.start, b.start)\n  const overlap = Math.max(\n    0,\n    Math.min(a.start + a.text.length, b.end) - b.start\n  )\n\n  const applied = applyStringDiff(targetText, a, b)\n  const sliceEnd = Math.max(\n    b.start + b.text.length,\n    a.start +\n      a.text.length +\n      (a.start + a.text.length > b.start ? b.text.length : 0) -\n      overlap\n  )\n\n  const text = applied.slice(start, sliceEnd)\n  const end = Math.max(a.end, b.end - a.text.length + (a.end - a.start))\n  return normalizeStringDiff(targetText, { start, end, text })\n}\n\n/**\n * Get the slate range the text diff spans.\n */\nexport function targetRange(textDiff: TextDiff): Range {\n  const { path, diff } = textDiff\n  return {\n    anchor: { path, offset: diff.start },\n    focus: { path, offset: diff.end },\n  }\n}\n\n/**\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\n * the pending diffs. Since the pending diffs might have been inserted with different\n * marks we have to 'walk' the offset from the starting position to ensure we still\n * have a valid point inside the document\n */\nexport function normalizePoint(editor: Editor, point: Point): Point | null {\n  let { path, offset } = point\n  if (!Editor.hasPath(editor, path)) {\n    return null\n  }\n\n  let leaf = Node.get(editor, path)\n  if (!Node.isText(leaf)) {\n    return null\n  }\n\n  const parentBlock = Editor.above(editor, {\n    match: n => Node.isElement(n) && Editor.isBlock(editor, n),\n    at: path,\n  })\n\n  if (!parentBlock) {\n    return null\n  }\n\n  while (offset > leaf.text.length) {\n    const entry = Editor.next(editor, { at: path, match: Node.isText })\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null\n    }\n\n    offset -= leaf.text.length\n    leaf = entry[0]\n    path = entry[1]\n  }\n\n  return { path, offset }\n}\n\n/**\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\n */\nexport function normalizeRange(editor: Editor, range: Range): Range | null {\n  const anchor = normalizePoint(editor, range.anchor)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = normalizePoint(editor, range.focus)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformPendingPoint(\n  editor: Editor,\n  point: Point,\n  op: Operation\n): Point | null {\n  const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor)\n  const textDiff = pendingDiffs?.find(({ path }) =>\n    Path.equals(path, point.path)\n  )\n\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, { affinity: 'backward' })\n  }\n\n  const { diff } = textDiff\n  // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n  if (point.offset <= diff.start + diff.text.length) {\n    const anchor = { path: point.path, offset: diff.start }\n    const transformed = Point.transform(anchor, op, {\n      affinity: 'backward',\n    })\n\n    if (!transformed) {\n      return null\n    }\n\n    return {\n      path: transformed.path,\n      offset: transformed.offset + point.offset - diff.start,\n    }\n  }\n\n  // Point references location after the diff\n  const anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start,\n  }\n  const transformed = Point.transform(anchor, op, {\n    affinity: 'backward',\n  })\n  if (!transformed) {\n    return null\n  }\n\n  if (\n    op.type === 'split_node' &&\n    Path.equals(op.path, point.path) &&\n    anchor.offset < op.position &&\n    diff.start < op.position\n  ) {\n    return transformed\n  }\n\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start,\n  }\n}\n\nexport function transformPendingRange(\n  editor: Editor,\n  range: Range,\n  op: Operation\n): Range | null {\n  const anchor = transformPendingPoint(editor, range.anchor, op)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = transformPendingPoint(editor, range.focus, op)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformTextDiff(\n  textDiff: TextDiff,\n  op: Operation\n): TextDiff | null {\n  const { path, diff, id } = textDiff\n\n  switch (op.type) {\n    case 'insert_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset <= diff.start) {\n        return {\n          diff: {\n            start: op.text.length + diff.start,\n            end: op.text.length + diff.end,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end + op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'remove_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset + op.text.length <= diff.start) {\n        return {\n          diff: {\n            start: diff.start - op.text.length,\n            end: diff.end - op.text.length,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end - op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'split_node': {\n      if (!Path.equals(op.path, path) || op.position >= diff.end) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op, { affinity: 'backward' })!,\n        }\n      }\n\n      if (op.position > diff.start) {\n        return {\n          diff: {\n            start: diff.start,\n            end: Math.min(op.position, diff.end),\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start - op.position,\n          end: diff.end - op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op, { affinity: 'forward' })!,\n      }\n    }\n    case 'merge_node': {\n      if (!Path.equals(op.path, path)) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op)!,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start + op.position,\n          end: diff.end + op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op)!,\n      }\n    }\n  }\n\n  const newPath = Path.transform(path, op)\n  if (!newPath) {\n    return null\n  }\n\n  return {\n    diff,\n    path: newPath,\n    id,\n  }\n}\n","/**\n * Utilities for single-line deletion\n */\n\nimport { Editor, Range } from 'slate'\nimport { DOMEditor } from '../plugin/dom-editor'\n\nconst doRectsIntersect = (rect: DOMRect, compareRect: DOMRect) => {\n  const middle = (compareRect.top + compareRect.bottom) / 2\n\n  return rect.top <= middle && rect.bottom >= middle\n}\n\nconst areRangesSameLine = (editor: DOMEditor, range1: Range, range2: Range) => {\n  const rect1 = DOMEditor.toDOMRange(editor, range1).getBoundingClientRect()\n  const rect2 = DOMEditor.toDOMRange(editor, range2).getBoundingClientRect()\n\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1)\n}\n\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nexport const findCurrentLineRange = (\n  editor: DOMEditor,\n  parentRange: Range\n): Range => {\n  const parentRangeBoundary = Editor.range(editor, Range.end(parentRange))\n  const positions = Array.from(Editor.positions(editor, { at: parentRange }))\n\n  let left = 0\n  let right = positions.length\n  let middle = Math.floor(right / 2)\n\n  if (\n    areRangesSameLine(\n      editor,\n      Editor.range(editor, positions[left]),\n      parentRangeBoundary\n    )\n  ) {\n    return Editor.range(editor, positions[left], parentRangeBoundary)\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(\n      editor,\n      positions[positions.length - 1],\n      parentRangeBoundary\n    )\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (\n      areRangesSameLine(\n        editor,\n        Editor.range(editor, positions[middle]),\n        parentRangeBoundary\n      )\n    ) {\n      right = middle\n    } else {\n      left = middle\n    }\n\n    middle = Math.floor((left + right) / 2)\n  }\n\n  return Editor.range(editor, positions[left], parentRangeBoundary)\n}\n","import {\n  BaseEditor,\n  Editor,\n  Location,\n  Node,\n  Operation,\n  Path,\n  PathRef,\n  Range,\n  Transforms,\n} from 'slate'\nimport {\n  TextDiff,\n  transformPendingPoint,\n  transformPendingRange,\n  transformTextDiff,\n} from '../utils/diff-text'\nimport {\n  getPlainText,\n  getSlateFragmentAttribute,\n  isDOMText,\n} from '../utils/dom'\nimport { Key } from '../utils/key'\nimport { findCurrentLineRange } from '../utils/lines'\nimport {\n  IS_NODE_MAP_DIRTY,\n  EDITOR_TO_KEY_TO_ELEMENT,\n  EDITOR_TO_ON_CHANGE,\n  EDITOR_TO_PENDING_ACTION,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_PENDING_SELECTION,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_USER_MARKS,\n  EDITOR_TO_USER_SELECTION,\n  NODE_TO_KEY,\n} from '../utils/weak-maps'\nimport { DOMEditor } from './dom-editor'\n\n/**\n * `withDOM` adds DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withDOM = <T extends BaseEditor>(\n  editor: T,\n  clipboardFormatKey = 'x-slate-fragment'\n): T & DOMEditor => {\n  const e = editor as T & DOMEditor\n  const { apply, onChange, deleteBackward, addMark, removeMark } = e\n\n  // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap())\n\n  e.addMark = (key, value) => {\n    EDITOR_TO_SCHEDULE_FLUSH.get(e)?.()\n\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    addMark(key, value)\n  }\n\n  e.removeMark = key => {\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    removeMark(key)\n  }\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit)\n    }\n\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      const parentBlockEntry = Editor.above(e, {\n        match: n => Node.isElement(n) && Editor.isBlock(e, n),\n        at: e.selection,\n      })\n\n      if (parentBlockEntry) {\n        const [, parentBlockPath] = parentBlockEntry\n        const parentElementRange = Editor.range(\n          e,\n          parentBlockPath,\n          e.selection.anchor\n        )\n\n        const currentLineRange = findCurrentLineRange(e, parentElementRange)\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, { at: currentLineRange })\n        }\n      }\n    }\n  }\n\n  // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n  e.apply = (op: Operation) => {\n    const matches: [Path, Key][] = []\n    const pathRefMatches: [PathRef, Key][] = []\n\n    const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e)\n    if (pendingDiffs?.length) {\n      const transformed = pendingDiffs\n        .map(textDiff => transformTextDiff(textDiff, op))\n        .filter(Boolean) as TextDiff[]\n\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed)\n    }\n\n    const pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e)\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(\n        e,\n        transformPendingRange(e, pendingSelection, op)\n      )\n    }\n\n    const pendingAction = EDITOR_TO_PENDING_ACTION.get(e)\n    if (pendingAction?.at) {\n      const at = Location.isPoint(pendingAction?.at)\n        ? transformPendingPoint(e, pendingAction.at, op)\n        : transformPendingRange(e, pendingAction.at, op)\n\n      EDITOR_TO_PENDING_ACTION.set(e, at ? { ...pendingAction, at } : null)\n    }\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node': {\n        matches.push(...getMatches(e, op.path))\n        break\n      }\n\n      case 'set_selection': {\n        // Selection was manually set, don't restore the user selection after the change.\n        EDITOR_TO_USER_SELECTION.get(e)?.unref()\n        EDITOR_TO_USER_SELECTION.delete(e)\n        break\n      }\n\n      case 'insert_node':\n      case 'remove_node': {\n        matches.push(...getMatches(e, Path.parent(op.path)))\n        break\n      }\n\n      case 'merge_node': {\n        const prevPath = Path.previous(op.path)\n        matches.push(...getMatches(e, prevPath))\n        break\n      }\n\n      case 'move_node': {\n        const commonPath = Path.common(\n          Path.parent(op.path),\n          Path.parent(op.newPath)\n        )\n        matches.push(...getMatches(e, commonPath))\n\n        let changedPath: Path\n        if (Path.isBefore(op.path, op.newPath)) {\n          matches.push(...getMatches(e, Path.parent(op.path)))\n          changedPath = op.newPath\n        } else {\n          matches.push(...getMatches(e, Path.parent(op.newPath)))\n          changedPath = op.path\n        }\n\n        const changedNode = Node.get(editor, Path.parent(changedPath))\n        const changedNodeKey = DOMEditor.findKey(e, changedNode)\n        const changedPathRef = Editor.pathRef(e, Path.parent(changedPath))\n        pathRefMatches.push([changedPathRef, changedNodeKey])\n\n        break\n      }\n    }\n\n    apply(op)\n\n    switch (op.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'move_node':\n      case 'split_node':\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_selection': {\n        // FIXME: Rename to something like IS_DOM_EDITOR_DESYNCED\n        // to better reflect reality, see #5792\n        IS_NODE_MAP_DIRTY.set(e, true)\n      }\n    }\n\n    for (const [path, key] of matches) {\n      const [node] = Editor.node(e, path)\n      NODE_TO_KEY.set(node, key)\n    }\n\n    for (const [pathRef, key] of pathRefMatches) {\n      if (pathRef.current) {\n        const [node] = Editor.node(e, pathRef.current)\n        NODE_TO_KEY.set(node, key)\n      }\n\n      pathRef.unref()\n    }\n  }\n\n  e.setFragmentData = (data: Pick<DataTransfer, 'getData' | 'setData'>) => {\n    const { selection } = e\n\n    if (!selection) {\n      return\n    }\n\n    const [start, end] = Range.edges(selection)\n    const startVoid = Editor.void(e, { at: start.path })\n    const endVoid = Editor.void(e, { at: end.path })\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const domRange = DOMEditor.toDOMRange(e, selection)\n    let contents = domRange.cloneContents()\n    let attach = contents.childNodes[0] as HTMLElement\n\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node as HTMLElement\n      }\n    })\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      const [voidNode] = endVoid\n      const r = domRange.cloneRange()\n      const domNode = DOMEditor.toDOMNode(e, voidNode)\n      r.setEndAfter(domNode)\n      contents = r.cloneContents()\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]')! as HTMLElement\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(\n      zw => {\n        const isNewline = zw.getAttribute('data-slate-zero-width') === 'n'\n        zw.textContent = isNewline ? '\\n' : ''\n      }\n    )\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      const span = attach.ownerDocument.createElement('span')\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre'\n      span.appendChild(attach)\n      contents.appendChild(span)\n      attach = span\n    }\n\n    const fragment = e.getFragment()\n    const string = JSON.stringify(fragment)\n    const encoded = window.btoa(encodeURIComponent(string))\n    attach.setAttribute('data-slate-fragment', encoded)\n    data.setData(`application/${clipboardFormatKey}`, encoded)\n\n    // Add the content to a <div> so that we can get its inner HTML.\n    const div = contents.ownerDocument.createElement('div')\n    div.appendChild(contents)\n    div.setAttribute('hidden', 'true')\n    contents.ownerDocument.body.appendChild(div)\n    data.setData('text/html', div.innerHTML)\n    data.setData('text/plain', getPlainText(div))\n    contents.ownerDocument.body.removeChild(div)\n    return data\n  }\n\n  e.insertData = (data: DataTransfer) => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data)\n    }\n  }\n\n  e.insertFragmentData = (data: DataTransfer): boolean => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    const fragment =\n      data.getData(`application/${clipboardFormatKey}`) ||\n      getSlateFragmentAttribute(data)\n\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment))\n      const parsed = JSON.parse(decoded) as Node[]\n      e.insertFragment(parsed)\n      return true\n    }\n    return false\n  }\n\n  e.insertTextData = (data: DataTransfer): boolean => {\n    const text = data.getData('text/plain')\n\n    if (text) {\n      const lines = text.split(/\\r\\n|\\r|\\n/)\n      let split = false\n\n      for (const line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, { always: true })\n        }\n\n        e.insertText(line)\n        split = true\n      }\n      return true\n    }\n    return false\n  }\n\n  e.onChange = options => {\n    const onContextChange = EDITOR_TO_ON_CHANGE.get(e)\n\n    if (onContextChange) {\n      onContextChange(options)\n    }\n\n    onChange(options)\n  }\n\n  return e\n}\n\nconst getMatches = (e: Editor, path: Path) => {\n  const matches: [Path, Key][] = []\n  for (const [n, p] of Editor.levels(e, { at: path })) {\n    const key = DOMEditor.findKey(e, n)\n    matches.push([p, key])\n  }\n  return matches\n}\n","export const TRIPLE_CLICK = 3\n","import { isHotkey } from 'is-hotkey'\nimport { IS_APPLE } from './environment'\n\n/**\n * Hotkey mappings for each platform.\n */\n\nconst HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z',\n}\n\nconst APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t',\n}\n\nconst WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z'],\n}\n\n/**\n * Create a platform-aware hotkey checker.\n */\n\nconst create = (key: string) => {\n  const generic = HOTKEYS[<keyof typeof HOTKEYS>key]\n  const apple = APPLE_HOTKEYS[<keyof typeof APPLE_HOTKEYS>key]\n  const windows = WINDOWS_HOTKEYS[<keyof typeof WINDOWS_HOTKEYS>key]\n  const isGeneric = generic && isHotkey(generic)\n  const isApple = apple && isHotkey(apple)\n  const isWindows = windows && isHotkey(windows)\n\n  return (event: KeyboardEvent) => {\n    if (isGeneric && isGeneric(event)) return true\n    if (IS_APPLE && isApple && isApple(event)) return true\n    if (!IS_APPLE && isWindows && isWindows(event)) return true\n    return false\n  }\n}\n\n/**\n * Hotkeys.\n */\n\nexport default {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo'),\n}\n","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { Ancestor, DecoratedRange, Editor, Range } from 'slate'\nimport { PLACEHOLDER_SYMBOL } from './weak-maps'\nimport { DOMEditor } from '../plugin/dom-editor'\n\nexport const shallowCompare = (\n  obj1: { [key: string]: unknown },\n  obj2: { [key: string]: unknown }\n) =>\n  Object.keys(obj1).length === Object.keys(obj2).length &&\n  Object.keys(obj1).every(\n    key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\n  )\n\nconst isDecorationFlagsEqual = (range: Range, other: Range) => {\n  const { anchor: rangeAnchor, focus: rangeFocus, ...rangeOwnProps } = range\n  const { anchor: otherAnchor, focus: otherFocus, ...otherOwnProps } = other\n\n  return (\n    range[PLACEHOLDER_SYMBOL] === other[PLACEHOLDER_SYMBOL] &&\n    shallowCompare(rangeOwnProps, otherOwnProps)\n  )\n}\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isElementDecorationsEqual = (\n  list: Range[] | null,\n  another: Range[] | null\n): boolean => {\n  if (list === another) {\n    return true\n  }\n\n  if (!list || !another) {\n    return false\n  }\n\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    if (!Range.equals(range, other) || !isDecorationFlagsEqual(range, other)) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isTextDecorationsEqual = (\n  list: Range[] | null,\n  another: Range[] | null\n): boolean => {\n  if (list === another) {\n    return true\n  }\n\n  if (!list || !another) {\n    return false\n  }\n\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    // compare only offsets because paths doesn't matter for text\n    if (\n      range.anchor.offset !== other.anchor.offset ||\n      range.focus.offset !== other.focus.offset ||\n      !isDecorationFlagsEqual(range, other)\n    ) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Split and group decorations by each child of a node.\n *\n * @returns An array with length equal to that of `node.children`. Each index\n * corresponds to a child of `node`, and the value is an array of decorations\n * for that child.\n */\n\nexport const splitDecorationsByChild = (\n  editor: Editor,\n  node: Ancestor,\n  decorations: DecoratedRange[]\n): DecoratedRange[][] => {\n  const decorationsByChild = Array.from(\n    node.children,\n    (): DecoratedRange[] => []\n  )\n\n  if (decorations.length === 0) {\n    return decorationsByChild\n  }\n\n  const path = DOMEditor.findPath(editor, node)\n  const level = path.length\n  const ancestorRange = Editor.range(editor, path)\n\n  const cachedChildRanges = new Array<Range | undefined>(node.children.length)\n\n  const getChildRange = (index: number) => {\n    const cachedRange = cachedChildRanges[index]\n    if (cachedRange) return cachedRange\n    const childRange = Editor.range(editor, [...path, index])\n    cachedChildRanges[index] = childRange\n    return childRange\n  }\n\n  for (const decoration of decorations) {\n    const decorationRange = Range.intersection(ancestorRange, decoration)\n    if (!decorationRange) continue\n\n    const [startPoint, endPoint] = Range.edges(decorationRange)\n    const startIndex = startPoint.path[level]\n    const endIndex = endPoint.path[level]\n\n    for (let i = startIndex; i <= endIndex; i++) {\n      const ds = decorationsByChild[i]\n      if (!ds) continue\n\n      const childRange = getChildRange(i)\n      const childDecorationRange = Range.intersection(childRange, decoration)\n      if (!childDecorationRange) continue\n\n      ds.push({\n        ...decoration,\n        ...childDecorationRange,\n      })\n    }\n  }\n\n  return decorationsByChild\n}\n"],"names":["DOMNode","globalThis","Node","DOMElement","Element","DOMText","Text","DOMRange","Range","DOMSelection","Selection","DOMStaticRange","StaticRange","getDefaultView","value","ownerDocument","defaultView","isDOMComment","isDOMNode","nodeType","isDOMElement","window","isDOMSelection","anchorNode","isDOMText","isPlainTextOnlyPaste","event","clipboardData","getData","types","length","normalizeDOMPoint","domPoint","_domPoint","_slicedToArray","node","offset","childNodes","isLast","index","_getEditableChildAndI","getEditableChildAndIndex","_getEditableChildAndI2","i","getEditableChild","textContent","hasShadowRoot","parent","parentNode","toString","direction","child","triedForward","triedBackward","getAttribute","_getEditableChildAndI3","_getEditableChildAndI4","getPlainText","domNode","text","nodeValue","_i","_Array$from","Array","from","childNode","display","getComputedStyle","getPropertyValue","tagName","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","htmlData","_ref","match","_ref2","fragment","getSelection","root","document","isTrackedMutation","editor","mutation","batch","target","matches","_DOMEditor$getWindow","DOMEditor","getWindow","containsShadowAware","hasDOMNode","editable","parentMutation","find","_ref3","addedNodes","removedNodes","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","_iterator2","_step2","getActiveElement","activeElement","_activeElement","shadowRoot","_activeElement$shadow","_activeElement2","isBefore","otherNode","Boolean","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","isAfter","DOCUMENT_POSITION_FOLLOWING","closestShadowAware","element","selector","current","parentElement","host","contains","IS_IOS","navigator","test","userAgent","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_WEBKIT","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_ANDROID_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","createElement","_navigator$userAgent$","parseInt","_navigator$userAgent$2","HAS_BEFORE_INPUT_SUPPORT","InputEvent","prototype","getTargetRanges","require$$0","Key","_createClass","_classCallCheck","_defineProperty","id","concat","IS_NODE_MAP_DIRTY","WeakMap","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","Symbol","MARK_PLACEHOLDER_SYMBOL","androidPendingDiffs","get","androidScheduleFlush","_EDITOR_TO_SCHEDULE_F","blur","el","toDOMNode","findDocumentOrShadowRoot","set","deselect","selection","domSelection","rangeCount","removeAllRanges","Transforms","getRootNode","Document","ShadowRoot","findEventRange","nativeEvent","_event","x","clientX","y","clientY","Error","toSlateNode","path","findPath","isElement","Editor","isVoid","rect","getBoundingClientRect","isPrev","isInline","left","width","top","height","edge","point","before","after","range","domRange","caretRangeFromPoint","position","caretPositionFromPoint","createRange","setStart","offsetNode","setEnd","toSlateRange","exactMatch","suppressThrow","findKey","key","unshift","Scrubber","stringify","focus","options","arguments","undefined","retries","operations","setTimeout","toDOMRange","addRange","select","start","preventScroll","_options$editable","editorEl","targetEl","message","includes","isContentEditable","hasEditableTarget","hasRange","anchor","hasPath","hasSelectableTarget","isTargetInsideNonReadonlyVoid","hasTarget","insertData","data","insertFragmentData","insertTextData","isComposing","isFocused","isReadOnly","slateNode","setFragmentData","originEvent","_EDITOR_TO_KEY_TO_ELE","toDOMPoint","_Editor$node","_Editor$node2","at","texts","querySelectorAll","attr","trueLength","end","nextText","hasAttribute","_nextText$textContent","domText","startsWith","Math","min","max","isBackward","domAnchor","domFocus","isCollapsed","startNode","startOffset","_ref4","endNode","endOffset","startEl","isStartAtZeroWidth","endEl","isEndAtZeroWidth","domEl","closest","toSlatePoint","searchDirection","_ref5","_ref6","nearestNode","nearestOffset","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","voidNode","potentialNonEditableNode","nonEditableNode","leafNode","contents","cloneContents","removals","_toConsumableArray","slice","call","forEach","textContext","removeChild","leafNodes","getLeafNodes","elementNode","_leafNodes$findLast","previousElementSibling","findLast","leaf","_leafNodes2$find","nextElementSibling","endsWith","_Editor$start","querySelector","_focusNode$textConten","startContainer","anchorOffset","focusNode","focusOffset","firstRange","getRangeAt","lastRange","HTMLTableRowElement","getLastChildren","childElementCount","children","firstNodeRow","lastNodeRow","firstNode","lastNode","HTMLElement","innerHTML","endContainer","collapsed","focusBeforeAnchor","isExpanded","isForward","mode","unhangRange","voids","verifyDiffState","textDiff","diff","isText","nextPath","Path","next","nextNode","applyStringDiff","_len","diffs","_key","reduce","longestCommonPrefixLength","str","another","charAt","longestCommonSuffixLength","normalizeStringDiff","targetText","removedText","prefixLength","suffixLength","normalized","mergeStringDiffs","a","b","overlap","applied","sliceEnd","targetRange","normalizePoint","parentBlock","above","isBlock","entry","isDescendant","normalizeRange","transformPendingPoint","op","pendingDiffs","equals","Point","transform","affinity","transformed","type","transformPendingRange","transformTextDiff","newPath","doRectsIntersect","compareRect","middle","bottom","areRangesSameLine","range1","range2","rect1","rect2","findCurrentLineRange","parentRange","parentRangeBoundary","positions","right","floor","withDOM","clipboardFormatKey","apply","onChange","deleteBackward","addMark","removeMark","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","unit","parentBlockEntry","_parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","pathRefMatches","map","filter","pendingSelection","pendingAction","Location","isPoint","_objectSpread","push","getMatches","_EDITOR_TO_USER_SELEC","unref","prevPath","previous","commonPath","common","changedPath","changedNode","changedNodeKey","changedPathRef","pathRef","_matches","_matches$_i","_i2","_pathRefMatches","_pathRefMatches$_i","_Editor$node3","_Editor$node4","_Range$edges","edges","_Range$edges2","startVoid","endVoid","attach","trim","_endVoid","r","cloneRange","setEndAfter","zw","isNewline","span","style","whiteSpace","appendChild","getFragment","string","JSON","encoded","btoa","encodeURIComponent","setAttribute","setData","div","body","decoded","decodeURIComponent","atob","parsed","parse","insertFragment","lines","split","line","splitNodes","always","insertText","onContextChange","levels","_step2$value","p","TRIPLE_CLICK","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteForward","extendBackward","extendForward","italic","insertSoftBreak","splitBlock","undo","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","redo","transposeCharacter","WINDOWS_HOTKEYS","create","generic","apple","windows","isGeneric","isHotkey","isApple","isWindows","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSoftBreak","isSplitBlock","isTransposeCharacter","isUndo","shallowCompare","obj1","obj2","Object","keys","every","hasOwnProperty","isDecorationFlagsEqual","other","rangeOwnProps","_objectWithoutProperties","_excluded","otherOwnProps","_excluded2","isElementDecorationsEqual","list","isTextDecorationsEqual","splitDecorationsByChild","decorations","decorationsByChild","level","ancestorRange","cachedChildRanges","getChildRange","cachedRange","childRange","decoration","decorationRange","intersection","startPoint","endPoint","startIndex","endIndex","ds","childDecorationRange"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,12,13,14,15,16,17,26,27]}